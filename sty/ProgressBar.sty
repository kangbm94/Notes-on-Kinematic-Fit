\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ProgressBar}[2019/11/14]
%\RequirePackage{./sty/beamercolorthemetubs}
\newlength{\beamer@tubs@foot@barwidth}
\setlength{\beamer@tubs@foot@barwidth}{\paperwidth}
\addtolength{\beamer@tubs@foot@barwidth}{-\beamer@tubs@foot@logowidth}

\pgfdeclareverticalshading{rainbow}{100bp}
{color(0bp)=(red); color(25bp)=(red); color(35bp)=(yellow);
	color(45bp)=(green); color(55bp)=(cyan); color(65bp)=(blue);
	color(75bp)=(violet); color(100bp)=(violet)}
\usetikzlibrary{shadings}
\defbeamertemplate*{footline}{tubs theme}
{
	\pgfmathsetmacro{\progress}{\insertframenumber/\inserttotalframenumber}
	
	\leavevmode%
	\includegraphics[width=\beamer@tubs@foot@logowidth]{./bonos/BonoWhy}
	\vbox{}\vskip-0.3\beamer@tubs@foot@logoheight
	
	% line, text and second logo
	\hbox{
		\hskip\beamer@tubs@foot@logowidth%
		\hskip-4pt
		\vspace{-.1\beamer@tubs@foot@logoheight}
		% line and text
		\vbox{
			%	  	  \vspace{5pt}
			\begin{beamercolorbox}[wd=\beamer@tubs@foot@barwidth,ht=3pt,dp=1pt]{}%
				\begin{tikzpicture}
					\fill[BonoWhite] (-0.5 * \beamer@tubs@foot@barwidth,4pt)  rectangle (0.5 * \beamer@tubs@foot@barwidth,-4pt);
					\shade[shading=rainbow,shading angle=270] 
					(-0.5 * \beamer@tubs@foot@barwidth,4pt)  rectangle (-0.5 * \beamer@tubs@foot@barwidth+\beamer@tubs@foot@barwidth*\progress,-4pt);
					\ifnum\numexpr 100*\insertframenumber\relax < \numexpr 55*\inserttotalframenumber\relax
					\draw node  {
						\textcolor{black}{\textbf{Page \insertframenumber /  \inserttotalframenumber}}
						};
					
					\else
						\ifnum\numexpr 100*\insertframenumber\relax < \numexpr 75*\inserttotalframenumber\relax
							\draw node  {
								\textcolor{white}{\textbf{Page \insertframenumber /  \inserttotalframenumber}}
							};
						\else
							\draw node  {
								\textcolor{PororiPink}{\textbf{Page \insertframenumber /  \inserttotalframenumber}}
							};
						\fi							
					\fi
				\end{tikzpicture}
			\end{beamercolorbox}%

			
%			\vspace{.7\beamer@tubs@foot@logoheight}
%			\vspace{.3\beamer@tubs@gaussmargin}  % (1 - 0.7)
		}
		
		% second logo
		\vbox{
			\if\beamer@tubs@institutelogo\@empty\else%
			\llap{\includegraphics[height=0.9\beamer@tubs@foot@logoheightr]{./logos/hanul}\hskip\beamer@tubs@gaussmargin\hskip.5\beamer@tubs@gaussmargin}
			\fi%
			\vspace{\beamer@tubs@gaussmargin}
		}
	}
}
